{
  "title": "Proposal (Mahasiswa)",
  "description": "API endpoints for mahasiswa to manage PKM proposals",
  "baseUrl": "",
  "endpoints": [
    {
      "method": "GET",
      "path": "/proposals",
      "description": "Get my proposals",
      "details": "Returns list of proposals where user is ketua or anggota (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "status",
          "type": "string",
          "in": "query",
          "description": "Filter by status",
          "values": ["pending", "ditolak", "disetujui", "revisi"]
        },
        {
          "name": "role",
          "type": "string",
          "in": "query",
          "description": "Filter by role in proposal",
          "values": ["ketua", "anggota"]
        },
        {
          "name": "tahun",
          "type": "integer",
          "in": "query",
          "description": "Filter by calendar year (tahun kalender)",
          "example": 2026
        },
        {
          "name": "per_page",
          "type": "integer",
          "in": "query",
          "description": "Items per page",
          "default": 15
        }
      ],
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "data": [
              {
                "id": 1,
                "judul": "Aplikasi Mobile untuk UMKM",
                "ketua": {
                  "id": 1,
                  "name": "John Doe",
                  "email": "john@example.com"
                },
                "pkm": {
                  "id": 1,
                  "singkatan": "PKM-K",
                  "nama": "Program Kreativitas Mahasiswa - Kewirausahaan"
                },
                "pembimbing": {
                  "id": 5,
                  "name": "Dr. Jane Smith",
                  "email": "jane@example.com"
                },
                "anggota": [
                  {
                    "id": 2,
                    "name": "Alice Brown",
                    "email": "alice@example.com"
                  }
                ],
                "kalender": {
                  "id": 1,
                  "tahun": 2026
                },
                "status_pembimbing": "pending",
                "status": "pending",
                "nilai_akhir": 85.5,
                "file_proposal_url": "http://localhost/storage/proposals/file.pdf",
                "created_at": "2026-02-07T10:30:00+00:00",
                "updated_at": "2026-02-07T10:30:00+00:00"
              }
            ]
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/proposals",
      "description": "Submit new proposal",
      "details": "Submit a new PKM proposal (Mahasiswa)",
      "authenticated": true,
      "requestBody": {
        "contentType": "multipart/form-data",
        "fields": [
          {
            "name": "judul",
            "type": "string",
            "required": true
          },
          {
            "name": "pkm_id",
            "type": "integer",
            "required": true
          },
          {
            "name": "anggota_ids",
            "type": "array<integer>",
            "required": true
          },
          {
            "name": "pembimbing_id",
            "type": "integer",
            "required": true
          },
          {
            "name": "file_proposal",
            "type": "string($binary)",
            "required": true
          }
        ]
      },
      "responses": [
        {
          "code": 201,
          "description": "Proposal submitted successfully",
          "content": {
            "success": true,
            "message": "Proposal berhasil diajukan",
            "data": {
              "id": 1,
              "judul": "Aplikasi Mobile untuk UMKM",
              "ketua": {
                "id": 1,
                "name": "John Doe",
                "email": "john@example.com"
              },
              "pkm": {
                "id": 1,
                "singkatan": "PKM-K",
                "nama": "Program Kreativitas Mahasiswa - Kewirausahaan"
              },
              "pembimbing": {
                "id": 5,
                "name": "Dr. Jane Smith",
                "email": "jane@example.com"
              },
              "anggota": [
                {
                  "id": 2,
                  "name": "Alice Brown",
                  "email": "alice@example.com"
                }
              ],
              "kalender": {
                "id": 1,
                "tahun": 2026
              },
              "status_pembimbing": "pending",
              "status": "pending",
              "nilai_akhir": 85.5,
              "file_proposal_url": "http://localhost/storage/proposals/file.pdf",
              "created_at": "2026-02-07T10:30:00+00:00",
              "updated_at": "2026-02-07T10:30:00+00:00"
            }
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        },
        {
          "code": 422,
          "description": "Validation error"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/proposals/{id}",
      "description": "Get proposal detail",
      "details": "Get detailed information of a proposal (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "id",
          "type": "integer",
          "in": "path",
          "required": true,
          "description": "id"
        }
      ],
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "data": {}
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        },
        {
          "code": 403,
          "description": "Forbidden"
        },
        {
          "code": 404,
          "description": "Proposal not found"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/proposals/{id}",
      "description": "Update proposal",
      "details": "Update proposal (only judul and file, only if status pending/revisi) (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "id",
          "type": "integer",
          "in": "path",
          "required": true,
          "description": "id"
        }
      ],
      "requestBody": {
        "contentType": "multipart/form-data",
        "fields": [
          {
            "name": "_method",
            "type": "string"
          },
          {
            "name": "judul",
            "type": "string",
            "required": true
          },
          {
            "name": "file_proposal",
            "type": "string($binary)"
          }
        ]
      },
      "responses": [
        {
          "code": 200,
          "description": "Proposal updated successfully",
          "content": {
            "success": true,
            "message": "Proposal berhasil diupdate",
            "data": {
              "id": 1,
              "judul": "Aplikasi Mobile untuk UMKM",
              "ketua": {
                "id": 1,
                "name": "John Doe",
                "email": "john@example.com"
              },
              "pkm": {
                "id": 1,
                "singkatan": "PKM-K",
                "nama": "Program Kreativitas Mahasiswa - Kewirausahaan"
              },
              "pembimbing": {
                "id": 5,
                "name": "Dr. Jane Smith",
                "email": "jane@example.com"
              },
              "anggota": [
                {
                  "id": 2,
                  "name": "Alice Brown",
                  "email": "alice@example.com"
                }
              ],
              "kalender": {
                "id": 1,
                "tahun": 2026
              },
              "status_pembimbing": "pending",
              "status": "pending",
              "nilai_akhir": 85.5,
              "file_proposal_url": "http://localhost/storage/proposals/file.pdf",
              "created_at": "2026-02-07T10:30:00+00:00",
              "updated_at": "2026-02-07T10:30:00+00:00"
            }
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        },
        {
          "code": 403,
          "description": "Forbidden or invalid status"
        },
        {
          "code": 404,
          "description": "Proposal not found"
        },
        {
          "code": 422,
          "description": "Validation error"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/proposals/{id}",
      "description": "Delete proposal",
      "details": "Delete proposal (only if status pending) (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "id",
          "type": "integer",
          "in": "path",
          "required": true,
          "description": "id"
        }
      ],
      "responses": [
        {
          "code": 200,
          "description": "Proposal deleted successfully",
          "content": {
            "success": true,
            "message": "Proposal berhasil dihapus"
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        },
        {
          "code": 403,
          "description": "Forbidden or invalid status"
        },
        {
          "code": 404,
          "description": "Proposal not found"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/proposals/check-eligibility",
      "description": "Check eligibility",
      "details": "Check if current user can submit a proposal (Mahasiswa)",
      "authenticated": true,
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "eligible": true,
            "message": "Anda dapat mengajukan proposal",
            "data": {
              "has_active_kalender": true,
              "is_pengajuan_open": true,
              "already_ketua": false,
              "already_anggota": false,
              "current_period": "pengajuan",
              "eligible_as_ketua": true,
              "eligible_as_anggota": true
            }
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/proposals/available-pkm",
      "description": "Get available PKM types",
      "details": "Get list of PKM types that are open in active kalender (Mahasiswa)",
      "authenticated": true,
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "data": [{}],
            "total": 5
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        },
        {
          "code": 404,
          "description": "No active kalender"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/proposals/available-anggota",
      "description": "Get available anggota",
      "details": "Get list of mahasiswa that can join as anggota (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "search",
          "type": "string",
          "in": "query",
          "description": "Search by name or email"
        },
        {
          "name": "per_page",
          "type": "integer",
          "in": "query",
          "description": "Items per page",
          "default": 50
        }
      ],
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "data": [{}]
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/proposals/available-pembimbing",
      "description": "Get available pembimbing",
      "details": "Get list of dosen that can be pembimbing (Mahasiswa)",
      "authenticated": true,
      "parameters": [
        {
          "name": "search",
          "type": "string",
          "in": "query",
          "description": "Search by name or email"
        },
        {
          "name": "per_page",
          "type": "integer",
          "in": "query",
          "description": "Items per page",
          "default": 50
        }
      ],
      "responses": [
        {
          "code": 200,
          "description": "Success",
          "content": {
            "success": true,
            "data": [{}]
          }
        },
        {
          "code": 401,
          "description": "Unauthenticated"
        }
      ]
    }
  ]
}
