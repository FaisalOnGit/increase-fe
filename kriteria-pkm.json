{
  "api_info": {
    "title": "Laravel API with Sanctum - PKM Kriteria Management",
    "base_url": "http://103.150.91.248:9001/api",
    "authentication": "Sanctum Bearer Token",
    "content_type": "application/json"
  },
  "endpoints": [
    {
      "name": "List Kriteria by PKM",
      "method": "GET",
      "url": "/pkm/{pkmId}/kriteria",
      "description": "Returns all kriteria for a PKM with total bobot summary (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "pkmId": {
          "type": "integer",
          "required": true,
          "description": "PKM ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": [
              {
                "id": 1,
                "pkm_id": 1,
                "urutan": 1,
                "judul": "Kreativitas dan Inovasi",
                "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
                "bobot": 30,
                "created_at": "2026-02-07T10:30:00+00:00",
                "updated_at": "2026-02-07T10:30:00+00:00"
              }
            ],
            "summary": {
              "total_kriteria": 4,
              "total_bobot": 100,
              "is_complete": true
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - PKM not found",
          "body": {
            "success": false,
            "message": "PKM not found"
          }
        }
      ]
    },
    {
      "name": "Create Kriteria",
      "method": "POST",
      "url": "/pkm/{pkmId}/kriteria",
      "description": "Create a new kriteria (validates total bobot <= 100%) (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "pkmId": {
          "type": "integer",
          "required": true,
          "description": "PKM ID"
        }
      },
      "request_body": {
        "pkm_id": {
          "type": "integer",
          "required": true,
          "description": "PKM ID"
        },
        "urutan": {
          "type": "integer",
          "required": true,
          "description": "Order/sequence number"
        },
        "judul": {
          "type": "string",
          "required": true,
          "description": "Criteria title"
        },
        "kriteria": {
          "type": "string",
          "required": true,
          "description": "Detailed criteria description"
        },
        "bobot": {
          "type": "integer",
          "required": true,
          "description": "Weight percentage (must not exceed 100% total)"
        }
      },
      "request_example": {
        "pkm_id": 1,
        "urutan": 1,
        "judul": "Kreativitas dan Inovasi",
        "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
        "bobot": 30
      },
      "responses": [
        {
          "status": 201,
          "description": "Created - Kriteria created successfully",
          "body": {
            "success": true,
            "message": "Kriteria created successfully",
            "data": {
              "id": 1,
              "pkm_id": 1,
              "urutan": 1,
              "judul": "Kreativitas dan Inovasi",
              "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
              "bobot": 30,
              "created_at": "2026-02-07T10:30:00+00:00",
              "updated_at": "2026-02-07T10:30:00+00:00"
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - PKM not found",
          "body": {
            "success": false,
            "message": "PKM not found"
          }
        },
        {
          "status": 422,
          "description": "Unprocessable Entity - Validation error (total bobot > 100%)",
          "body": {
            "success": false,
            "message": "Total bobot cannot exceed 100%",
            "errors": {
              "bobot": ["Total bobot for this PKM would exceed 100%"]
            }
          }
        }
      ]
    },
    {
      "name": "Get Kriteria Detail",
      "method": "GET",
      "url": "/pkm-kriteria/{id}",
      "description": "Get detailed information of a specific kriteria (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Kriteria ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": {
              "id": 1,
              "pkm_id": 1,
              "urutan": 1,
              "judul": "Kreativitas dan Inovasi",
              "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
              "bobot": 30,
              "created_at": "2026-02-07T10:30:00+00:00",
              "updated_at": "2026-02-07T10:30:00+00:00"
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Kriteria not found",
          "body": {
            "success": false,
            "message": "Kriteria not found"
          }
        }
      ]
    },
    {
      "name": "Update Kriteria",
      "method": "PUT",
      "url": "/pkm-kriteria/{id}",
      "description": "Update an existing kriteria (validates total bobot <= 100%) (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Kriteria ID"
        }
      },
      "request_body": {
        "urutan": {
          "type": "integer",
          "required": false,
          "description": "Order/sequence number"
        },
        "judul": {
          "type": "string",
          "required": false,
          "description": "Criteria title"
        },
        "kriteria": {
          "type": "string",
          "required": false,
          "description": "Detailed criteria description"
        },
        "bobot": {
          "type": "integer",
          "required": false,
          "description": "Weight percentage (must not exceed 100% total)"
        }
      },
      "request_example": {
        "urutan": 1,
        "judul": "Kreativitas dan Inovasi",
        "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
        "bobot": 30
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Kriteria updated successfully",
          "body": {
            "success": true,
            "message": "Kriteria updated successfully",
            "data": {
              "id": 1,
              "pkm_id": 1,
              "urutan": 1,
              "judul": "Kreativitas dan Inovasi",
              "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
              "bobot": 30,
              "created_at": "2026-02-07T10:30:00+00:00",
              "updated_at": "2026-02-07T10:30:00+00:00"
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Kriteria not found",
          "body": {
            "success": false,
            "message": "Kriteria not found"
          }
        },
        {
          "status": 422,
          "description": "Unprocessable Entity - Validation error (total bobot > 100%)",
          "body": {
            "success": false,
            "message": "Total bobot cannot exceed 100%",
            "errors": {
              "bobot": ["Total bobot for this PKM would exceed 100%"]
            }
          }
        }
      ]
    },
    {
      "name": "Delete Kriteria",
      "method": "DELETE",
      "url": "/pkm-kriteria/{id}",
      "description": "Soft delete a kriteria (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Kriteria ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Kriteria deleted successfully",
          "body": {
            "success": true,
            "message": "Kriteria deleted successfully"
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Kriteria not found",
          "body": {
            "success": false,
            "message": "Kriteria not found"
          }
        }
      ]
    },
    {
      "name": "Duplicate Kriteria to Another PKM",
      "method": "POST",
      "url": "/pkm/{sourcePkmId}/kriteria/duplicate",
      "description": "Copy all kriteria from source PKM to target PKM (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "sourcePkmId": {
          "type": "integer",
          "required": true,
          "description": "Source PKM ID to copy from"
        }
      },
      "request_body": {
        "target_pkm_id": {
          "type": "integer",
          "required": true,
          "description": "Target PKM ID to copy to"
        },
        "overwrite": {
          "type": "boolean",
          "required": false,
          "description": "Whether to overwrite existing kriteria in target PKM",
          "default": false
        }
      },
      "request_example": {
        "target_pkm_id": 2,
        "overwrite": false
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Kriteria duplicated successfully",
          "body": {
            "success": true,
            "message": "4 kriteria duplicated successfully",
            "data": [
              {
                "id": 1,
                "pkm_id": 1,
                "urutan": 1,
                "judul": "Kreativitas dan Inovasi",
                "kriteria": "Mengukur tingkat kebaruan dan orisinalitas ide usaha yang diajukan...",
                "bobot": 30,
                "created_at": "2026-02-07T10:30:00+00:00",
                "updated_at": "2026-02-07T10:30:00+00:00"
              }
            ]
          }
        },
        {
          "status": 400,
          "description": "Bad Request - Cannot duplicate to same PKM",
          "body": {
            "success": false,
            "message": "Cannot duplicate kriteria to the same PKM"
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - PKM not found",
          "body": {
            "success": false,
            "message": "PKM not found"
          }
        }
      ]
    },
    {
      "name": "Reorder Kriteria",
      "method": "POST",
      "url": "/pkm/{pkmId}/kriteria/reorder",
      "description": "Update urutan of multiple kriteria at once (for drag & drop functionality) (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "pkmId": {
          "type": "integer",
          "required": true,
          "description": "PKM ID"
        }
      },
      "request_body": {
        "orders": {
          "type": "array",
          "required": true,
          "description": "Array of kriteria IDs and their new urutan values",
          "items": {
            "id": {
              "type": "integer",
              "description": "Kriteria ID"
            },
            "urutan": {
              "type": "integer",
              "description": "New order/sequence number"
            }
          }
        }
      },
      "request_example": {
        "orders": [
          {
            "id": 1,
            "urutan": 1
          },
          {
            "id": 2,
            "urutan": 2
          },
          {
            "id": 3,
            "urutan": 3
          }
        ]
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Kriteria reordered successfully",
          "body": {
            "success": true,
            "message": "Kriteria reordered successfully"
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        }
      ]
    }
  ],
  "models": {
    "KriteriaPKM": {
      "id": "integer - Unique identifier",
      "pkm_id": "integer - Foreign key to PKM",
      "urutan": "integer - Order/sequence number for display",
      "judul": "string - Short criteria title",
      "kriteria": "string - Detailed criteria description",
      "bobot": "integer - Weight percentage (0-100)",
      "created_at": "datetime - Creation timestamp",
      "updated_at": "datetime - Last update timestamp"
    },
    "KriteriaSummary": {
      "total_kriteria": "integer - Total number of kriteria for the PKM",
      "total_bobot": "integer - Sum of all bobot values (should be 100 for complete)",
      "is_complete": "boolean - Whether total_bobot equals 100"
    }
  },
  "authentication_method": {
    "type": "Sanctum Tokens",
    "description": "Tokens are generated via /auth/login and must be included in Authorization header",
    "header_format": "Authorization: Bearer <token>",
    "token_endpoint": "/auth/login",
    "protected_endpoints": ["/pkm/{pkmId}/kriteria/*", "/pkm-kriteria/*"],
    "token_type": "Stateless",
    "revocation": "Tokens are revoked on logout",
    "access_level": "Admin only"
  },
  "general_notes": {
    "base_url": "http://103.150.91.248:9001/api",
    "content_type": "application/json",
    "access_level": "All Kriteria endpoints are Admin only",
    "special_endpoints": {
      "/pkm/{pkmId}/kriteria": "Returns list with summary of total bobot",
      "/pkm/{sourcePkmId}/kriteria/duplicate": "Bulk copy kriteria between PKM types",
      "/pkm/{pkmId}/kriteria/reorder": "For drag-and-drop reordering UI"
    },
    "validation_rules": {
      "bobot": "Total bobot for all kriteria in a PKM must not exceed 100%",
      "urutan": "Must be unique within the same PKM",
      "duplicate": "Cannot duplicate to the same PKM (source != target)"
    },
    "use_cases": {
      "rubric_management": "Each PKM type has its own rubric with weighted criteria",
      "evaluation": "Reviewers use these criteria to score submissions",
      "bulk_operations": "Duplicate rubrics between similar PKM types",
      "ui_features": "Drag-and-drop reordering supported via /reorder endpoint"
    },
    "soft_delete": "Kriteria are soft deleted and can be restored if needed",
    "error_handling": {
      "response_format": {
        "success": "boolean",
        "message": "human-readable message",
        "data": "response data (if applicable)",
        "summary": "kriteria summary with total bobot",
        "errors": "validation details (if applicable)"
      }
    },
    "example_workflow": {
      "step_1": "Create PKM (e.g., PKM-K)",
      "step_2": "Add kriteria one by one via POST /pkm/{pkmId}/kriteria",
      "step_3": "Monitor total_bobot in summary until it reaches 100%",
      "step_4": "Use /reorder endpoint to adjust sequence",
      "step_5": "Duplicate to new PKM types instead of manual entry"
    }
  }
}
