{
  "api_info": {
    "title": "Laravel API with Sanctum - Prodi Management",
    "base_url": "http://103.150.91.248:9001/api",
    "authentication": "Sanctum Bearer Token",
    "content_type": "application/json"
  },
  "endpoints": [
    {
      "name": "List Study Programs",
      "method": "GET",
      "url": "/prodi",
      "description": "Returns paginated list of study programs with filters (Admin only)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "query_params": {
        "search": {
          "type": "string",
          "required": false,
          "description": "Search by prodi name"
        },
        "fakultas_id": {
          "type": "integer",
          "required": false,
          "description": "Filter by faculty ID"
        },
        "strata": {
          "type": "string",
          "required": false,
          "description": "Filter by strata",
          "available_values": ["D2", "D3", "S1", "S2", "S3"]
        },
        "per_page": {
          "type": "integer",
          "required": false,
          "description": "Items per page",
          "default": 15
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": {
            "success": true,
            "data": [
              {
                "id": 1,
                "name": "Teknik Informatika",
                "code": "TI",
                "strata": "S1",
                "fakultas_id": 1,
                "kaprodi_id": 3,
                "fakultas": {
                  "id": 1,
                  "name": "Fakultas Teknik"
                },
                "kaprodi": {
                  "id": 3,
                  "name": "Ahmad Rizki"
                }
              }
            ],
            "meta": {
              "current_page": 1,
              "per_page": 15,
              "total": 50,
              "last_page": 4
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 403,
          "description": "Forbidden",
          "body": {
            "success": false,
            "message": "Unauthorized access"
          }
        }
      ]
    },
    {
      "name": "Create Study Program",
      "method": "POST",
      "url": "/prodi",
      "description": "Create a new study program (code auto-generated if not provided)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "request_body": {
        "name": {
          "type": "string",
          "required": true,
          "description": "Study program name"
        },
        "code": {
          "type": "string",
          "required": false,
          "description": "Study program code (auto-generated if not provided)"
        },
        "strata": {
          "type": "string",
          "required": true,
          "description": "Strata level",
          "available_values": ["D2", "D3", "S1", "S2", "S3"]
        },
        "fakultas_id": {
          "type": "integer",
          "required": true,
          "description": "Faculty ID"
        },
        "kaprodi_id": {
          "type": "integer",
          "required": false,
          "description": "Kaprodi (Head of Program) user ID"
        }
      },
      "request_example": {
        "name": "Teknik Informatika",
        "code": "TI",
        "strata": "S1",
        "fakultas_id": 1,
        "kaprodi_id": 3
      },
      "responses": [
        {
          "status": 201,
          "description": "Created - Prodi created successfully",
          "body": {
            "success": true,
            "message": "Study program created successfully",
            "data": {
              "id": 1,
              "name": "Teknik Informatika",
              "code": "TI",
              "strata": "S1",
              "fakultas_id": 1,
              "kaprodi_id": 3
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 403,
          "description": "Forbidden",
          "body": {
            "success": false,
            "message": "Unauthorized access"
          }
        },
        {
          "status": 422,
          "description": "Unprocessable Entity - Validation error",
          "body": {
            "success": false,
            "message": "Validation failed",
            "errors": {
              "name": ["The name field is required."],
              "fakultas_id": ["The fakultas_id field is required."]
            }
          }
        }
      ]
    },
    {
      "name": "Get Prodi Details",
      "method": "GET",
      "url": "/prodi/{id}",
      "description": "Returns detailed information about a specific study program",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Prodi ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": {
              "id": 1,
              "name": "Teknik Informatika",
              "code": "TI",
              "strata": "S1",
              "fakultas_id": 1,
              "kaprodi_id": 3,
              "fakultas": {
                "id": 1,
                "name": "Fakultas Teknik"
              },
              "kaprodi": {
                "id": 3,
                "name": "Ahmad Rizki",
                "email": "ahmad.rizki@unsil.ac.id"
              },
              "created_at": "2023-01-01T00:00:00.000000Z",
              "updated_at": "2023-01-01T00:00:00.000000Z"
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Prodi not found",
          "body": {
            "success": false,
            "message": "Study program not found"
          }
        }
      ]
    },
    {
      "name": "Update Study Program",
      "method": "PUT",
      "url": "/prodi/{id}",
      "description": "Update study program information including kaprodi assignment",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Prodi ID"
        }
      },
      "request_body": {
        "name": {
          "type": "string",
          "required": false,
          "description": "Study program name"
        },
        "code": {
          "type": "string",
          "required": false,
          "description": "Study program code"
        },
        "strata": {
          "type": "string",
          "required": false,
          "description": "Strata level",
          "available_values": ["D2", "D3", "S1", "S2", "S3"]
        },
        "fakultas_id": {
          "type": "integer",
          "required": false,
          "description": "Faculty ID"
        },
        "kaprodi_id": {
          "type": "integer",
          "required": false,
          "description": "Kaprodi (Head of Program) user ID"
        }
      },
      "request_example": {
        "name": "Teknik Informatika",
        "code": "TI",
        "strata": "S1",
        "fakultas_id": 1,
        "kaprodi_id": 3
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Prodi updated successfully",
          "body": {
            "success": true,
            "message": "Study program updated successfully",
            "data": {
              "id": 1,
              "name": "Teknik Informatika",
              "code": "TI",
              "strata": "S1",
              "fakultas_id": 1,
              "kaprodi_id": 3
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 403,
          "description": "Forbidden",
          "body": {
            "success": false,
            "message": "Unauthorized access"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Prodi not found",
          "body": {
            "success": false,
            "message": "Study program not found"
          }
        },
        {
          "status": 422,
          "description": "Unprocessable Entity - Validation error",
          "body": {
            "success": false,
            "message": "Validation failed",
            "errors": {
              "strata": ["The strata field is required."]
            }
          }
        }
      ]
    },
    {
      "name": "Delete Study Program",
      "method": "DELETE",
      "url": "/prodi/{id}",
      "description": "Delete a study program from the system",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Prodi ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Prodi deleted successfully",
          "body": {
            "success": true,
            "message": "Study program deleted successfully"
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 403,
          "description": "Forbidden",
          "body": {
            "success": false,
            "message": "Unauthorized access"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Prodi not found",
          "body": {
            "success": false,
            "message": "Study program not found"
          }
        }
      ]
    },
    {
      "name": "Get All Prodis",
      "method": "GET",
      "url": "/prodi/all",
      "description": "Returns all prodis without pagination (for dropdowns)",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": [
              {
                "id": 1,
                "name": "Teknik Informatika",
                "fakultas_id": 1
              },
              {
                "id": 2,
                "name": "Sistem Informasi",
                "fakultas_id": 1
              },
              {
                "id": 3,
                "name": "Manajemen",
                "fakultas_id": 2
              }
            ]
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        }
      ]
    },
    {
      "name": "Get Unassigned Prodis",
      "method": "GET",
      "url": "/prodi/unassigned",
      "description": "Returns prodis that have not been assigned to any faculty",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "query_params": {
        "search": {
          "type": "string",
          "required": false,
          "description": "Search by prodi name"
        },
        "per_page": {
          "type": "integer",
          "required": false,
          "description": "Items per page",
          "default": 15
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": [
              {
                "id": 5,
                "name": "Teknik Sipil",
                "code": "TS",
                "strata": "S1",
                "fakultas_id": null
              }
            ],
            "meta": {
              "current_page": 1,
              "per_page": 15,
              "total": 5
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        }
      ]
    },
    {
      "name": "Get Prodis by Faculty",
      "method": "GET",
      "url": "/prodi/by-fakultas/{fakultasId}",
      "description": "Returns all prodis for a specific faculty",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "fakultasId": {
          "type": "integer",
          "required": true,
          "description": "Faculty ID"
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Success",
          "body": {
            "success": true,
            "data": [
              {
                "id": 1,
                "name": "Teknik Informatika",
                "code": "TI",
                "strata": "S1"
              },
              {
                "id": 2,
                "name": "Sistem Informasi",
                "code": "SI",
                "strata": "S1"
              }
            ]
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        }
      ]
    },
    {
      "name": "Assign Kaprodi",
      "method": "POST",
      "url": "/prodi/{id}/assign-kaprodi",
      "description": "Assign a user as kaprodi (head) to a study program. User will receive kaprodi role.",
      "authentication": true,
      "headers": {
        "Authorization": "Bearer <token>"
      },
      "path_params": {
        "id": {
          "type": "integer",
          "required": true,
          "description": "Prodi ID"
        }
      },
      "request_body": {
        "kaprodi_id": {
          "type": "integer",
          "required": true,
          "description": "User ID to assign as kaprodi"
        }
      },
      "request_example": {
        "kaprodi_id": 3
      },
      "responses": [
        {
          "status": 200,
          "description": "OK - Kaprodi assigned successfully",
          "body": {
            "success": true,
            "message": "Kaprodi assigned successfully",
            "data": {
              "id": 1,
              "kaprodi_id": 3,
              "kaprodi": {
                "id": 3,
                "name": "Ahmad Rizki",
                "email": "ahmad.rizki@unsil.ac.id"
              }
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized - Unauthenticated",
          "body": {
            "success": false,
            "message": "Unauthenticated"
          }
        },
        {
          "status": 404,
          "description": "Not Found - Prodi not found",
          "body": {
            "success": false,
            "message": "Study program not found"
          }
        },
        {
          "status": 422,
          "description": "Unprocessable Entity - Validation error",
          "body": {
            "success": false,
            "message": "Validation failed",
            "errors": {
              "kaprodi_id": ["The kaprodi_id field is required."]
            }
          }
        }
      ]
    }
  ],
  "models": {
    "Prodi": {
      "id": "integer - Unique identifier",
      "name": "string - Study program name",
      "code": "string - Study program code",
      "strata": "string - Education level (D2, D3, S1, S2, S3)",
      "fakultas_id": "integer|null - Faculty ID",
      "kaprodi_id": "integer|null - Kaprodi user ID",
      "fakultas": "object - Faculty details (included in response)",
      "kaprodi": "object - Kaprodi user details (included in response)",
      "created_at": "datetime - Creation timestamp",
      "updated_at": "datetime - Last update timestamp"
    }
  },
  "authentication_method": {
    "type": "Sanctum Tokens",
    "description": "Tokens are generated via /auth/login and must be included in Authorization header",
    "header_format": "Authorization: Bearer <token>",
    "token_endpoint": "/auth/login",
    "protected_endpoints": ["/prodi/*"],
    "token_type": "Stateless",
    "revocation": "Tokens are revoked on logout",
    "access_level": "Admin only"
  },
  "general_notes": {
    "base_url": "http://103.150.91.248:9001/api",
    "content_type": "application/json",
    "access_level": "All prodi endpoints are Admin only",
    "strata_levels": {
      "D2": "Diploma 2 - 2-3 years",
      "D3": "Diploma 3 - 3 years",
      "S1": "Sarjana - 4 years",
      "S2": "Magister - 2 years",
      "S3": "Doktor - 3-4 years"
    },
    "special_endpoints": {
      "/prodi/all": "For dropdowns - no pagination",
      "/prodi/unassigned": "Prodis without faculty",
      "/prodi/by-fakultas/{id}": "Filter by faculty",
      "/prodi/{id}/assign-kaprodi": "Assign kaprodi with role update"
    },
    "error_handling": {
      "response_format": {
        "success": "boolean",
        "message": "human-readable message",
        "data": "response data (if applicable)",
        "meta": "pagination metadata",
        "errors": "validation details (if applicable)"
      }
    }
  }
}
